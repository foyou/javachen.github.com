
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>JavaChen Blog</title>
    <meta name="description" content="开源、Java、Pentaho、Hadoop、Cassandra以及数据可视化">
    <meta name="keywords" content="pentaho、kettle、hadoop、hdfs、hive、hbase、mapreduce、cassandra、openstack、OpenNebula、Eucalyptus、fedora、linux、vim、extjs、dhtmlx、spring、javascript"/>
    <meta name="author" content="JavaChen">
    <meta name="copyright" content="© http://blog.javachen.com" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <![endif]-->

    <link href="//cdn.staticfile.org/twitter-bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" media="all"/>
    <link href="//cdn.staticfile.org/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet"media="all">
    <link href="//cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" media="all" />
    <link href="/assets/themes/bootstrap/css/style-min.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/assets/themes/bootstrap/css/pygments-min.css" rel="stylesheet" type="text/css" media="all" />
  
    <!--[if lt IE 9]>
      <script src="/assets/themes/bootstrap/resources/respond/Respond.min.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="canonical" href="http://blog.javachen.com/page6/" />
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/" title="JavaChen Blog">JavaChen Blog</a>
        </div>

        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav">
            
            
            


  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  



          </ul>

 		 <ul class="nav navbar-nav navbar-right">
          <li><a href="http://blog.javachen.com/rss.xml" target="_blank" title="RSS"><span class="icon-rss icon-large"></span></a></li>
          
            <li><a href="https://github.com/javachen" target="_blank" title="Github"><span class="icon-github icon-large"></span></a></li>
          
          
          
          
          
            <li><a href="http://weibo.com/chenzhijun" target="_blank" title="Weibo"><span class="icon-weibo icon-large"></span></a></li>
          
        </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      
<div class="row">
  <div class="col-md-9">
    <article class="page-header-wrapper">
      <header class="page-header">
        <h1 class="entry-title">  <small>Life is long, we need java.</small></h1>
      </header>
	


<article>
    <h2 class="entry-title under_line"><a href="/2013/06/24/install-cdh-by-cloudera-manager">通过Cloudera Manager安装CDH</a></h2>
    
		
		  <h1 id="toc_0">1 方法一</h1>

<p>你可以从<a href="https://ccp.cloudera.com/display/SUPPORT/Downloads">https://ccp.cloudera.com/display/SUPPORT/Downloads</a>下载<code class="prettyprint">cloudera-manager-installer.bin</code>，然后修改执行权限并执行该脚本。</p>

<p>该脚本中配置的rhel6的yum源为：<a href="http://archive.cloudera.com/cm4/redhat/6/x86_64/cm/4/">http://archive.cloudera.com/cm4/redhat/6/x86_64/cm/4/</a>，下载的过程必须连网并且rpm的过程会非常慢，这种方法对虚拟机或者是无法连网的内网机器来说根本无法使用。</p>

<p>因为知道所有的rpm都在上面网址可以下载到，故你可以手动下载这些rpm然后手动安装，详细过程请参考：<a href="http://dreamyue.com/post/41090075449/cloudera-manager-hadoop">通过cloudera-manager来安装hadoop</a>。</p>

<h1 id="toc_1">2 方法二</h1>

<p>这里还有一种方法，就是手动下载<code class="prettyprint">Cloudera Manager</code>的yum tar包，在虚拟机中搭建一个本地yum源，然后修改hosts文件，使<code class="prettyprint">archive.cloudera.com</code>域名映射到本地ip。</p>

<h1 id="toc_2">3 方法三</h1>

<p>出于好奇，想破解<code class="prettyprint">cloudera-manager-installer.bin</code>，然后看看其中做了哪些操作。通过以下脚本即可解压该文件：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">[june@june-fedora cdh]$ mv cloudera-manager-installer.bin cloudera-manager-installer.zip
[june@june-fedora cdh]$ unzip cloudera-manager-installer.zip 
</code></pre></div>
<p>解压之后的目录如下：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">[june@june-fedora cloudera-manager-installer]$ ll
总用量 512
-rwxrwxr-x. 1 june june 501698 5月  25 09:53 cloudera-manager-installer.zip
drwxr-xr-x. 2 june june   4096 5月  23 03:05 data
drwxr-xr-x. 2 june june   4096 5月  22 21:48 guis
drwxr-xr-x. 2 june june   4096 5月  22 21:48 meta
drwxr-xr-x. 2 june june   4096 5月  22 21:48 scripts
</code></pre></div>
<p>查看解压之后的文件可以看到安装脚本是用lua编写并用MojoSetup编译的，从<code class="prettyprint">scripts/config.lua</code>脚本中大概可以看出安装脚本的执行过程。</p>

<p>整理下该脚本逻辑，主要是做了以下操作：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">yum install -y jdk.x86_64 
yum install -y cloudera-manager-server 
yum install -y cloudera-manager-server-db
/etc/init.d/cloudera-scm-server start
/etc/init.d/cloudera-scm-server-db start
</code></pre></div>
<p>知道了上面这点之后，就可以在本地的cloudera-manager yum中，执行以上操作完成cloudera-manager的安装，安装成功之后查看7180端口是否打开：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">netstat -na| grep 7180
</code></pre></div>
<p>通过浏览器访问<code class="prettyprint">http://IP:7180</code>登录cloudera manager界面：用户名/密码：<code class="prettyprint">admin/admin</code>,按照界面提示完成hadoop集群安装。</p>

<h1 id="toc_3">4 排错</h1>

<p>在执行下面一个命令时候可能会出现如下异常</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">/etc/init.d/cloudera-scm-server-db start
</code></pre></div>
<p>异常信息如下：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    [root@cdh1 cloudera-scm-server-db]# /etc/init.d/cloudera-scm-server-db start
    属于此数据库系统的文件宿主为用户 &quot;cloudera-scm&quot;.
    此用户也必须为服务器进程的宿主.
    数据库簇将带有 locale en_US.UTF8 初始化.
    缺省的文本搜索配置将会被设置到&quot;english&quot;

    修复已存在目录 /var/lib/cloudera-scm-server-db/data 的权限 ... initdb: 无法改变目录 &quot;/var/lib/cloudera-scm-server-db/data&quot; 的权限: 权限不够
    Could not initialize database server.
      This usually means that your PostgreSQL installation failed or isn&#39;t working properly.
      PostgreSQL is installed using the set of repositories found on this machine. Please
      ensure that PostgreSQL can be installed. Please also uninstall any other instances of
      PostgreSQL and then try again., giving up
</code></pre></div>
<p>这时候，请执行如下命令：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    su -s /bin/bash cloudera-scm -c &quot;touch /var/log/cloudera-scm-server/db.log; /usr/share/cmf/bin/initialize_embedded_db.sh /var/lib/cloudera-scm-server-db/data /var/log/cloudera-scm-server/db.log&quot;
    su -s /bin/bash cloudera-scm -c &quot;pg_ctl start -w -D /var/lib/cloudera-scm-server-db/data -l /var/log/cloudera-scm-server/db.log&quot;
</code></pre></div>
		 
     
      <div class="status">
        <!--<a class="btn btn-default btn-sm pull-left" href="/2013/06/24/install-cdh-by-cloudera-manager"><span class="readmore">more &raquo; </span></a>-->
        <div class="clearfix"></div>
      </div>
</article>

<article>
    <h2 class="entry-title under_line"><a href="/2013/04/17/access-idh-2.3-hbase-in-kettle">kettle访问IDH2.3中的HBase</a></h2>
    
      Kettle是一款国外开源的ETL工具，纯java编写，可以在Window、Linux、Unix上运行，绿色无需安装，数据抽取高效稳定。[big-data-plugin](https://github.com/pentaho/big-data-plugin)是kettle中用于访问bigdata，包括hadoop、cassandra、mongodb等nosql数据库的一个插件。
     
      <div class="status">
        <!--<a class="btn btn-default btn-sm pull-left" href="/2013/04/17/access-idh-2.3-hbase-in-kettle"><span class="readmore">more &raquo; </span></a>-->
        <div class="clearfix"></div>
      </div>
</article>

<article>
    <h2 class="entry-title under_line"><a href="/2013/04/07/add-a-field-from-paramter-to-output">kettle中添加一个参数字段到输出</a></h2>
    
      kettle可以将输入流中的字段输出到输出流中，输入输出流可以为数据库、文件或其他，通常情况下输入流中字段为已知确定的，如果我想在输出流中添加一个来自转换的命令行参数的一个字段，该如何操作？
     
      <div class="status">
        <!--<a class="btn btn-default btn-sm pull-left" href="/2013/04/07/add-a-field-from-paramter-to-output"><span class="readmore">more &raquo; </span></a>-->
        <div class="clearfix"></div>
      </div>
</article>

<article>
    <h2 class="entry-title under_line"><a href="/2013/04/06/install-cloudera-cdh-by-yum">从yum安装Cloudera CDH集群</a></h2>
    
      记录使用yum通过rpm方式安装Cloudera CDH中的hadoop、yarn、HBase，需要注意初始化namenode之前需要手动创建一些目录并设置权限。
     
      <div class="status">
        <!--<a class="btn btn-default btn-sm pull-left" href="/2013/04/06/install-cloudera-cdh-by-yum"><span class="readmore">more &raquo; </span></a>-->
        <div class="clearfix"></div>
      </div>
</article>

<article>
    <h2 class="entry-title under_line"><a href="/2013/03/29/install-impala">安装impala过程</a></h2>
    
		
		  <p>与Hive类似，Impala也可以直接与HDFS和HBase库直接交互。只不过Hive和其它建立在MapReduce上的框架适合需要长时间运行的批处理任务。例如：那些批量提取，转化，加载（ETL）类型的Job，而Impala主要用于实时查询。</p>

<p>Hadoop集群各节点的环境设置及安装过程见<a href="/2013/03/24/manual-install-Cloudera-Hadoop-CDH">手动安装Cloudera Hadoop CDH</a>,参考这篇文章，hadoop各个组件和jdk版本如下：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    hadoop-2.0.0-cdh4.6.0
    hbase-0.94.15-cdh4.6.0
    hive-0.10.0-cdh4.6.0
    jdk1.6.0_38
</code></pre></div>
<p>hadoop各组件可以在<a href="http://archive.cloudera.com/cdh4/cdh/4/">这里</a>下载。</p>

<p>集群规划为7个节点，每个节点的ip、主机名和部署的组件分配如下：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    192.168.0.1        desktop1     NameNode、Hive、ResourceManager、impala
    192.168.0.2        desktop2     SSNameNode
    192.168.0.3        desktop3     DataNode、HBase、NodeManager、impala
    192.168.0.4        desktop4     DataNode、HBase、NodeManager、impala
    192.168.0.5        desktop5     DataNode、HBase、NodeManager、impala
    192.168.0.6        desktop6     DataNode、HBase、NodeManager、impala
    192.168.0.7        desktop7     DataNode、HBase、NodeManager、impala
</code></pre></div>
<h1 id="toc_0">install</h1>

<p>下载 impala，目前最新版本为<code class="prettyprint">1.2.4</code>，<a href="http://archive.cloudera.com/impala/redhat/6/x86_64/impala/1.2.4/">下载地址</a>。</p>

<h1 id="toc_1">安装过程</h1>

<p>安装前提:</p>

<p>1、配置<code class="prettyprint">hostname</code>，关闭防火墙</p>

<p>2、先安装好java、hadoop集群以及hive，可以参考我的文章：</p>

<ul>
<li><a href="/2013/03/24/manual-install-Cloudera-Hadoop-CDH4.2.html">手动安装Cloudera Hadoop CDH</a></li>
<li><a href="/2013/03/24/manual-install-Cloudera-hive-CDH4.2.html">手动安装Cloudera Hive CDH</a></li>
</ul>

<p>impala仓库列表如下：</p>

<ul>
<li>Red Hat 5 repo file (<a href="http://archive.cloudera.com/impala/redhat/5/x86_64/impala/cloudera-impala.repo">http://archive.cloudera.com/impala/redhat/5/x86_64/impala/cloudera-impala.repo</a>) in /etc/yum.repos.d/.</li>
<li>Red Hat 6 repo file (<a href="http://archive.cloudera.com/impala/redhat/6/x86_64/impala/cloudera-impala.repo">http://archive.cloudera.com/impala/redhat/6/x86_64/impala/cloudera-impala.repo</a>) in /etc/yum.repos.d/.</li>
<li>SUSE repo file (<a href="http://archive.cloudera.com/impala/sles/11/x86_64/impala/cloudera-impala.repo">http://archive.cloudera.com/impala/sles/11/x86_64/impala/cloudera-impala.repo</a>) in /etc/zypp/repos.d/.</li>
<li>Ubuntu 10.04 list file (<a href="http://archive.cloudera.com/impala/ubuntu/lucid/amd64/impala/cloudera.list">http://archive.cloudera.com/impala/ubuntu/lucid/amd64/impala/cloudera.list</a>) in /etc/apt/sources.list.d/.</li>
<li>Ubuntu 12.04 list file (<a href="http://archive.cloudera.com/impala/ubuntu/precise/amd64/impala/cloudera.list">http://archive.cloudera.com/impala/ubuntu/precise/amd64/impala/cloudera.list</a>) in /etc/apt/sources.list.d/.</li>
<li>Debian list file (<a href="http://archive.cloudera.com/impala/debian/squeeze/amd64/impala/cloudera.list">http://archive.cloudera.com/impala/debian/squeeze/amd64/impala/cloudera.list</a>) in /etc/apt/sources.list.d/.</li>
</ul>

<p>我使用的是centos系统，在配置好yum源之后，只需要执行如下命令即可：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">$ sudo yum install impala             # Binaries for daemons
$ sudo yum install impala-server      # Service start/stop script
$ sudo yum install impala-state-store # Service start/stop script
$ sudo yum install impala-catalog     # Service start/stop script
$ sudo yum install impala-shell
</code></pre></div>
<p><strong>你可以按照你的部署规划，在不同节点上装上不同的服务</strong>。</p>

<h1 id="toc_2">配置Impala</h1>

<h2 id="toc_3">查看安装路径</h2>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    [root@desktop1 conf]# find / -name impala
    /var/run/impala
    /var/lib/alternatives/impala
    /var/log/impala
    /usr/lib/impala
    /etc/alternatives/impala
    /etc/default/impala
    /etc/impala
</code></pre></div>
<h2 id="toc_4">添加配置文件</h2>

<p>impalad的配置文件路径由环境变量<code class="prettyprint">IMPALA_CONF_DIR</code>指定，默认为<code class="prettyprint">/usr/lib/impala/conf</code></p>

<p>在节点desktop1上 拷贝<code class="prettyprint">hive-site.xml</code>、<code class="prettyprint">core-site.xml</code>、<code class="prettyprint">hdfs-site.xml</code>至<code class="prettyprint">/usr/lib/impala/conf</code>目录下:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    [root@desktop1 conf]# mkdir /usr/lib/impala/conf/
    [root@desktop1 conf]# cp /opt/hadoop-2.0.0-cdh4.6.0/etc/hadoop/log4j.properties /usr/lib/impala/conf/
    [root@desktop1 conf]# cp /opt/hadoop-2.0.0-cdh4.6.0/etc/hadoop/core-site.xml /usr/lib/impala/conf/
    [root@desktop1 conf]# cp /opt/hadoop-2.0.0-cdh4.6.0/etc/hadoop/hdfs-site.xml /usr/lib/impala/conf/
    [root@desktop1 conf]# cp /opt/hive-0.10.0-cdh4.6.0/conf/hive-site.xml /usr/lib/impala/conf/
</code></pre></div>
<p>并作下面修改在<code class="prettyprint">hdfs-site.xml</code>文件中添加如下内容：</p>
<div class="highlight"><pre><code class="xml language-xml" data-lang="xml">    <span class="nt">&lt;property&gt;</span>
        <span class="nt">&lt;name&gt;</span>dfs.client.read.shortcircuit<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>

    <span class="nt">&lt;property&gt;</span>
        <span class="nt">&lt;name&gt;</span>dfs.domain.socket.path<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;value&gt;</span>/var/run/hadoop-hdfs/dn._PORT<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>

    <span class="nt">&lt;property&gt;</span>
      <span class="nt">&lt;name&gt;</span>dfs.datanode.hdfs-blocks-metadata.enabled<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
</code></pre></div>
<p>同步以上文件到其他节点</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    [root@desktop1 ~]# scp -r /usr/lib/impala/conf desktop3:/usr/lib/impala/
    [root@desktop1 ~]# scp -r /usr/lib/impala/conf desktop4:/usr/lib/impala/
    [root@desktop1 ~]# scp -r /usr/lib/impala/conf desktop5:/usr/lib/impala/
    [root@desktop1 ~]# scp -r /usr/lib/impala/conf desktop6:/usr/lib/impala/
    [root@desktop1 ~]# scp -r /usr/lib/impala/conf desktop7:/usr/lib/impala/
</code></pre></div>
<h2 id="toc_5">hadoop中添加native包</h2>

<p>拷贝hadoop native包到hadoop安装路径下，并同步hadoop文件到其他节点：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    [root@desktop1 ~]# cp /usr/lib/impala/lib/*.so* /opt/hadoop-2.0.0-cdh4.6.0/lib/native/
</code></pre></div>
<h2 id="toc_6">创建socket path</h2>

<p>在每个节点上创建/var/run/hadoop-hdfs:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    [root@desktop1 ~]# mkdir -p /var/run/hadoop-hdfs
    [root@desktop3 ~]# mkdir -p /var/run/hadoop-hdfs
    [root@desktop4 ~]# mkdir -p /var/run/hadoop-hdfs
    [root@desktop5 ~]# mkdir -p /var/run/hadoop-hdfs
    [root@desktop6 ~]# mkdir -p /var/run/hadoop-hdfs
    [root@desktop7 ~]# mkdir -p /var/run/hadoop-hdfs
</code></pre></div>
<p>拷贝postgres jdbc jar：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    cp /opt/hive-0.10.0-cdh4.6.0/lib/postgresql-9.1-903.jdbc* /usr/lib/impala/lib/
</code></pre></div>
<h1 id="toc_7">启动服务</h1>

<ol>
<li>在hive所在节点启动statestored（默认端口为24000）:</li>
</ol>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    GLOG_v=1 nohup statestored -state_store_port=24000 &amp;
</code></pre></div>
<p>如果statestore正常启动，可以在<code class="prettyprint">/tmp/statestored.INFO</code>查看。如果出现异常，可以查看<code class="prettyprint">/tmp/statestored.ERROR</code>定位错误信息。</p>

<ol>
<li>在所有impalad节点上：</li>
</ol>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    HADOOP_CONF_DIR=&quot;/usr/lib/impala/conf&quot; nohup impalad -state_store_host=desktop1 -nn=desktop1 \
        -nn_port=8020 -hostname=desktop3 -ipaddress=192.168.0.3 &amp;
</code></pre></div>
<p>注意： 其中的<code class="prettyprint">-hostname</code>和<code class="prettyprint">-ipaddress</code>表示当前启动impalad实例所在机器的主机名和ip地址。</p>

<p>如果impalad正常启动，可以在<code class="prettyprint">/tmp/ impalad.INFO</code>查看。如果出现异常，可以查看<code class="prettyprint">/tmp/impalad.ERROR</code>定位错误信息。</p>

<h1 id="toc_8">使用shell</h1>

<p>使用<code class="prettyprint">impala-shell</code>启动Impala Shell，分别连接各Impalad主机(我这里是：desktop3、desktop4、desktop5、desktop6、desktop7)，刷新元数据，之后就可以执行shell命令。相关的命令如下(可以在任意节点执行)：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    &gt;impala-shell
    [Not connected] &gt;connect desktop3:21000
    [desktop3:21000] &gt;refresh
    [desktop3:21000] &gt;connect desktop4:21000
    [desktop4:21000] &gt;refresh
</code></pre></div>
<h1 id="toc_9">注意：</h1>

<ol>
<li>如果hive使用mysql或postgres数据库作为metastore的存储，则需要拷贝相应的jdbc jar到<code class="prettyprint">/usr/lib/impala/lib</code>目录下</li>
<li>如果出现<code class="prettyprint">E0325 11:04:19.937718  7239 statestored-main.cc:52] Could not start webserver on port: 25010</code>，可能是已经启动了statestored进程</li>
</ol>

<h1 id="toc_10">参考文章</h1>

<ul>
<li><a href="http://yuntai.1kapp.com/?p=904">Impala安装文档完整版</a></li>
<li><a href="http://tech.uc.cn/?p=817">Impala入门笔记</a></li>
<li><a href="https://ccp.cloudera.com/display/IMPALA10BETADOC/Installing+and+Using+Cloudera+Impala">Installing and Using Cloudera Impala</a></li>
</ul>

		 
     
      <div class="status">
        <!--<a class="btn btn-default btn-sm pull-left" href="/2013/03/29/install-impala"><span class="readmore">more &raquo; </span></a>-->
        <div class="clearfix"></div>
      </div>
</article>

<article>
    <h2 class="entry-title under_line"><a href="/2013/03/24/manual-install-Cloudera-hive-CDH">手动安装Cloudera Hive CDH</a></h2>
    
      本文主要记录手动安装CDH Hive过程，环境设置及Hadoop、HBase安装过程见上篇文章。
     
      <div class="status">
        <!--<a class="btn btn-default btn-sm pull-left" href="/2013/03/24/manual-install-Cloudera-hive-CDH"><span class="readmore">more &raquo; </span></a>-->
        <div class="clearfix"></div>
      </div>
</article>

<article>
    <h2 class="entry-title under_line"><a href="/2013/03/24/manual-install-Cloudera-hbase-CDH">手动安装Cloudera HBase CDH</a></h2>
    
      本文主要记录手动安装Cloudera HBase集群过程，环境设置及Hadoop安装过程见上篇文章。
     
      <div class="status">
        <!--<a class="btn btn-default btn-sm pull-left" href="/2013/03/24/manual-install-Cloudera-hbase-CDH"><span class="readmore">more &raquo; </span></a>-->
        <div class="clearfix"></div>
      </div>
</article>

<article>
    <h2 class="entry-title under_line"><a href="/2013/03/24/manual-install-Cloudera-Hadoop-CDH">手动安装Cloudera Hadoop CDH</a></h2>
    
      手动安装Cloudera Hadoop CDH
     
      <div class="status">
        <!--<a class="btn btn-default btn-sm pull-left" href="/2013/03/24/manual-install-Cloudera-Hadoop-CDH"><span class="readmore">more &raquo; </span></a>-->
        <div class="clearfix"></div>
      </div>
</article>

<article>
    <h2 class="entry-title under_line"><a href="/2013/03/08/note-about-installing-hadoop-cluster">【笔记】Hadoop安装部署</a></h2>
    
		
		  <h1 id="toc_0">安装虚拟机</h1>

<p>使用VirtualBox安装rhel6.3，存储为30G，内存为1G，并使用复制克隆出两个新的虚拟机，这样就存在3台虚拟机，设置三台虚拟机的主机名称，如：rhel-june、rhel-june-1、rhel-june-2</p>

<h1 id="toc_1">配置网络</h1>

<p>a. VirtualBox全局设定-网络中添加一个新的连接：vboxnet0</p>

<p>b. 设置每一个虚拟机的网络为Host-Only</p>

<p>c.分别修改每个虚拟机的ip，DHCP或手动设置</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">vim /etc/sysconfig/network-scripts/ifcfg-eth0
vim /etc/udev/rules.d/70-persistent-net.rules  #删掉第一个，修改第二个名字为eth0
start_udev
</code></pre></div>
<p>d.修改主机名</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">vim /etc/sysconfig/network
</code></pre></div>
<p>e.每个虚拟机中修改hosts：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">192.168.56.100 rhel-june
192.168.56.101 rhel-june-1
192.168.56.102 rhel-june-2
</code></pre></div>
<p>最后机器列表为：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">rhel-june:   192.168.56.100
rhel-june-1: 192.168.56.101
rhel-june-2: 192.168.56.102
</code></pre></div>
<h1 id="toc_2">机群规划</h1>

<p>版本：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">hadoop:1.1.1
JDK:1.6.0_38
</code></pre></div>
<p>集群各节点：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">NameNode:192.168.56.100
NameSecondary:192.168.56.100
DataNode:192.168.56.101
DataNode:192.168.56.102
</code></pre></div>
<h1 id="toc_3">安装过程</h1>

<p>a.将hadoop压缩包解压缩到/opt目录</p>

<p>b.修改以下配置文件：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">core-site.xml
hdfs-site.sml
mapred-site.xml
</code></pre></div>
<p>c.设置master、slaves文件</p>

<p>master中内容为：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    192.168.56.100
</code></pre></div>
<p>slaves中内容为：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    192.168.56.101
    192.168.56.102
</code></pre></div>
<p>d.设置环境变量</p>

<p>方便执行java命令及hadoop命令. 使用root登录，<code class="prettyprint">vi ~/.bash_profile</code>追加下列信息</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">export JAVA_HOME=/opt/jdk1.6.0_38
export HADOOP_INSTALL=/opt/hadoop-1.1.1
export PATH=$PATH:$HADOOP_INSTALL/bin:$JAVA_HOME/bin
</code></pre></div>
<p>e.修改hadoop脚本中<code class="prettyprint">JAVA_HOME</code>：<code class="prettyprint">/opt/hadoop-1.1.1/conf/hadoop-env.sh</code></p>

<p>f.格式化namenode</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">hadoop namenode -format
</code></pre></div>
<p>g.启动hdfs集群</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sh /opt/hadoop-1.1.1/bin/start-all.sh
</code></pre></div>
<p>h.查看节点进程</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">jps
</code></pre></div>
<h1 id="toc_4">查看状态</h1>
<div class="highlight"><pre><code class="text language-text" data-lang="text">http://rhel-june:50030/
http://rhel-june:50070/
</code></pre></div>
		 
     
      <div class="status">
        <!--<a class="btn btn-default btn-sm pull-left" href="/2013/03/08/note-about-installing-hadoop-cluster"><span class="readmore">more &raquo; </span></a>-->
        <div class="clearfix"></div>
      </div>
</article>

<article>
    <h2 class="entry-title under_line"><a href="/2013/02/20/summary-of-the-work-in-2012">2012年度总结</a></h2>
    
      2012年是在公司工作的第二年，在总结2012年的得与失的时候，有必要和《2011的度年终总结》相比较，在比较中审视自己在2012年是否有改进2011年存在的不足、是否有实现2011年定下的2012年工作计划。以下是2012年相对于2011年的一些变化。
     
      <div class="status">
        <!--<a class="btn btn-default btn-sm pull-left" href="/2013/02/20/summary-of-the-work-in-2012"><span class="readmore">more &raquo; </span></a>-->
        <div class="clearfix"></div>
      </div>
</article>


<hr/>

<!-- Pagination links -->
<div class="pull-right">
  
    
    <a class="btn btn-default btn-sm" href="/">Home</a>
    <a class="btn btn-default btn-sm" href="/page5/">&laquo; Prev</a>
    
  
  <span><a class="btn btn-default btn-sm disabled">Page: 6 of 10</a></span>
  
    <a class="btn btn-default btn-sm" href="/page7/">Next &raquo;</a>
    <a class="btn btn-default btn-sm" href="/page10/">Last</a>
  
</div>

    </article>
  </div>

  <div class="col-md-3 visible-lg visible-md">
                <section>
   	 <h2>About</h2>
	 <p class="entry-content">
   	 系统架构师，主要从事Java和Hadoop相关工作。<a href="/about.html">更多信息</a> 
	</p>
       </section>


            <section>
       <h2>Posts</h2>
       <div class="category">
         <ul>
           
           <li><a href="/2014/04/08/a-benchmark-tool-on-postgresql">PostgreSQL测试工具pgbench</a></li>
           
           <li><a href="/2014/04/07/some-metrics-in-postgresql">PostgreSQL监控指标</a></li>
           
           <li><a href="/2014/04/07/install-postgresql-on-rhel-system">RHEL系统下安装PostgreSQL</a></li>
           
           <li><a href="/2014/04/06/mysql-config-for-master-slave-replication">RHEL系统安装MySQL主备环境</a></li>
           
           <li><a href="/2014/04/06/install-mysql-on-rhel-system">RHEL系统下安装MySql</a></li>
           
           <li><a href="/2014/04/04/introduction-to-broadleaf-commerce">BroadleafCommerce介绍</a></li>
           
           <li><a href="/2014/04/01/install-jdk-with-saltstack">使用SaltStack安装JDK1.6</a></li>
           
           <li><a href="/2014/03/31/what-is-new-in-CDH4.5.0">CDH4.5.0 新特性</a></li>
           
           <li><a href="/2014/03/18/simulate-weibo-login-in-python">Python模拟新浪微博登录</a></li>
           
           <li><a href="/2014/03/15/schema-in-solr">Solr的schema.xml</a></li>
           
         </ul>
       </div>
      </section>


            <section>
        <h2>Comments</h2>
        <div class="category">
          <ul class="ds-recent-comments" data-num-items="5" data-show-avatars="0" data-show-time="0" data-show-title="0" data-show-admin="0" data-excerpt-length="14"></ul>
        </div>
      </section>


            
      <section>
        <h2>Blogroll</h2>
        <div class="category">
          <ul>
            
              <li><a href="//blog.javachen.com/" target="_blank">JavaChen Blog</a></li>
            
              <li><a href="/sitemap.xml" target="_blank">JavaChen Sitemap</a></li>
            
              <li><a href="//blog.boluotou.com/" target="_blank">圆木菠萝罐</a></li>
            
              <li><a href="//log4d.com/" target="_blank">Log4D</a></li>
            
              <li><a href="//blog.frankel.ch" target="_blank">A Java geek</a></li>
            
              <li><a href="//kohsuke.org/" target="_blank">Kohsuke Kawaguchi</a></li>
            
              <li><a href="//www.parallellabs.com/" target="_blank">并行实验室</a></li>
            
              <li><a href="//www.yanjiuyanjiu.com/" target="_blank">研究研究</a></li>
            
              <li><a href="//cn.soulmachine.me/" target="_blank">灵魂机器</a></li>
            
              <li><a href="//code6.github.io/" target="_blank">MayCoder</a></li>
            
              <li><a href="//blog.liulantao.com/" target="_blank">刘兰涛的Blog</a></li>
            
              <li><a href="//zjun.github.io/" target="_blank">zJun Blog</a></li>
            
          </ul>
        </div>
      </section>
      



       <script type="text/javascript">
      var duoshuoQuery = {short_name:"javachen"};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = 'http://static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
    </script>

  </div>
</div>


      <hr>
      <footer>
        <p>
          &copy; 2009-2014 <a href="/" target="_blank">JavaChen</a>
          <span class="pull-right text-muted">
            Powered by
            <a href="https://github.com/javachen/jekyll-bootstrap-3" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll-Bootstrap-3</a>
            and <a href="http://getbootstrap.com" target="_blank">Twitter Bootstrap 3.1.1</a> |<script language="javascript" type="text/javascript" src="http://js.users.51.la/12111481.js"></script>
<noscript><a href="http://www.51.la/?12111481" target="_blank"><img alt="Statistic" src="http://img.users.51.la/12111481.asp" style="border:none" /></a></noscript>

          </span>
        </p>
              <div id="toTop"><a href="#">▲</a><a href="#footer">▼</a></div>

      </footer>
    </div>

        <!-- Baidu Button BEGIN -->
    <script type="text/javascript" id="bdshell_js"></script>
    <script>document.write(unescape('%3Cscript%20type%3D%22text/javascript%22%20id%3D%22bdshare_js%22%20data%3D%22type%3Dtools%26amp%3Buid%3D1539895%22%3E%3C/script%3E'));</script>
    <script type="text/javascript">
      var bds_config = {
        'review':'normal',
        'snsKey':{
        }
      };
      document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
    </script>
    <!-- Baidu Button END -->

    <script type="text/javascript" src="//cdn.staticfile.org/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="//cdn.staticfile.org/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//cdn.staticfile.org/fancybox/2.1.5/jquery.fancybox.pack.js"></script>
    <script type="text/javascript" src="/assets/themes/bootstrap/js/main.js"></script>
  </body>
</html>

